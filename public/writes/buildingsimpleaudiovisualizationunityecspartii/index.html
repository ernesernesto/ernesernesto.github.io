<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Building Simple Audio Visualization with Unity ECS Part II — Job System | ernesernesto io</title><meta property="og:title" content="Building Simple Audio Visualization with Unity ECS Part II — Job System | ernesernesto io"><meta name=twitter:title content="Building Simple Audio Visualization with Unity ECS Part II — Job System | ernesernesto io"><meta itemprop=name content="Building Simple Audio Visualization with Unity ECS Part II — Job System | ernesernesto io"><meta name=application-name content="Building Simple Audio Visualization with Unity ECS Part II — Job System | ernesernesto io"><meta property="og:site_name" content="ernesernesto.github.io"><meta name=description content="ernesernesto dev blog"><meta itemprop=description content="ernesernesto dev blog"><meta property="og:description" content="ernesernesto dev blog"><meta name=twitter:description content="ernesernesto dev blog"><meta property="og:locale" content="en-us"><meta name=language content="en-us"><meta itemprop=image content="http://ernesernesto.github.io/"><meta property="og:image" content="http://ernesernesto.github.io/"><meta name=twitter:image content="http://ernesernesto.github.io/"><meta name=twitter:image:src content="http://ernesernesto.github.io/"><meta name=generator content="Hugo 0.119.0"><link rel=canonical href=http://ernesernesto.github.io/writes/buildingsimpleaudiovisualizationunityecspartii/><link href=/style.min.9bd04d0fad85388343088ec85e9afd787ea003e72914d7f57df39c17ab2e7173.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=http://ernesernesto.github.io/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme=dark class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=http://ernesernesto.github.io/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class=menu-link href=/pages/reads/>Reads</a></li><li><a class="menu-link active" href=/writes/>Writes</a></li><li><a class=menu-link href=/pages/executes/>Executes</a></li><li><a class=menu-link href=/pages/info/>Info</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Building Simple Audio Visualization with Unity ECS Part II — Job System</h1><div class=post-meta><time datetime=2018-07-30T12:39:57+07:00 itemprop=datePublished>Jul 30, 2018</time></div></header><div class=page-content><p>This is the second part of our journey to learn ECS on unity. If you haven’t read the <a href=/writes/buildingsimpleaudiovisualizationunityecsparti/>previous post</a> I recommend you to take a while to read that in order to know how the audio visualizer work with the old MonoBehavior way.</p><p>Today we’re going to take what’s written on the first part and change it into a Jobified Unity Job System.</p><p>The Job System, as explained on the Unity pages, take advantages of multiple cores that our machine have. They also guarantee some protection of multi-threading race conditions pitfalls. To make the audio visualizer Jobified, I took inspiration from here . That links have some great examples on how to structure your data, schedule your jobs, and use the results.</p><p>What the job system do is breaking your big “process” into a smaller “Jobs”, doing specific task that could be run parallelly. Job receive parameters and operates on data similar to how a method behave. Each job is self contained but it could have a dependency between each other, making other job only launch after a specific job finishes.</p><p>Unity Job System code usually have this form</p><pre tabindex=0><code>1. Create Job, populate the job with data
2. Schedule the Job, you would get a JobHandle that could be used as a dependency for other jobs
3. Finish the Job by calling the Complete on the JobHandle
</code></pre><p>First, we will move the act of processing the audio visualizer data into job</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>struct</span> <span class=nc>SpectrumJob</span> <span class=p>:</span> <span class=n>IJobParallelForTransform</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>maxScale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>dynamics</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>epsilon</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=kt>float</span><span class=p>&gt;</span> <span class=n>currentSpectrums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=kt>float</span><span class=p>&gt;</span> <span class=n>prevSpectrums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=n>Vector3</span><span class=p>&gt;</span> <span class=n>origins</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Execute</span><span class=p>(</span><span class=kt>int</span> <span class=n>index</span><span class=p>,</span> <span class=n>TransformAccess</span> <span class=n>transform</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>current</span> <span class=p>=</span> <span class=n>currentSpectrums</span><span class=p>[</span><span class=n>index</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>prev</span> <span class=p>=</span> <span class=n>prevSpectrums</span><span class=p>[</span><span class=n>index</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>val</span> <span class=p>=</span> <span class=p>(</span><span class=n>dynamics</span><span class=p>*</span><span class=n>prev</span> <span class=p>+</span> <span class=p>(</span><span class=m>1</span> <span class=p>-</span> <span class=n>dynamics</span><span class=p>)*</span><span class=n>current</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>prevSpectrums</span><span class=p>[</span><span class=n>index</span><span class=p>]</span> <span class=p>=</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>valAdjusted</span> <span class=p>=</span> <span class=n>val</span><span class=p>*</span><span class=n>maxScale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>halfHeight</span> <span class=p>=</span> <span class=n>valAdjusted</span><span class=p>*</span><span class=m>0.5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Vector3</span> <span class=n>origin</span> <span class=p>=</span> <span class=n>origins</span><span class=p>[</span><span class=n>index</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>val</span> <span class=p>&gt;=</span> <span class=n>epsilon</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>transform</span><span class=p>.</span><span class=n>localPosition</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>origin</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>halfHeight</span><span class=p>,</span> <span class=n>origin</span><span class=p>.</span><span class=n>z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>transform</span><span class=p>.</span><span class=n>localScale</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=n>valAdjusted</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>transform</span><span class=p>.</span><span class=n>localScale</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As you can see all the work of scaling the cube and offseting it’s position now moved into the <code>SpectrumJob</code>. There are new <code>NativeArray</code> data that is declared inside the Job, those are Unity <code>NativeContainers</code> that is introduced in the new job system. The general purpose of those containers is to give added safety system so you’ll get error if two scheduled jobs writing into the same <code>NativeContainers</code>. The Job System also prevent accessing data from the main thread, each code executed inside the <code>Execute()</code> is considered working in a separated thread from the main thread.</p><p>There’s also other rule that needs to be respected when working with the <code>NativeContainers</code> with Unity Job Sytem, you could read them here.</p><p>We still need old MonoBehavior to create, schedule and complete the <code>SpectrumJob</code>, as displayed here.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>BootupJob</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>GameObject</span> <span class=n>cubePrefab</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Settings</span> <span class=n>settings</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span><span class=p>[]</span> <span class=n>spectrumBuff</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Transform</span><span class=p>[]</span> <span class=n>transforms</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=kt>float</span><span class=p>&gt;</span> <span class=n>currentSpectrums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=kt>float</span><span class=p>&gt;</span> <span class=n>prevSpectrums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>NativeArray</span><span class=p>&lt;</span><span class=n>Vector3</span><span class=p>&gt;</span> <span class=n>origins</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>TransformAccessArray</span> <span class=n>transformsAccess</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>SpectrumJob</span> <span class=n>spectrumJob</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>JobHandle</span> <span class=n>jobHandle</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span><span class=c1>// Omitted</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span><span class=p>.</span><span class=n>transformsAccess</span> <span class=p>=</span> <span class=k>new</span> <span class=n>TransformAccessArray</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=n>transforms</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Update</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>dynamics</span> <span class=p>=</span> <span class=n>settings</span><span class=p>.</span><span class=n>dynamics</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>maxScale</span> <span class=p>=</span> <span class=n>settings</span><span class=p>.</span><span class=n>maxScale</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>rotationSpeed</span> <span class=p>=</span> <span class=n>settings</span><span class=p>.</span><span class=n>rotationSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>epsilon</span> <span class=p>=</span> <span class=n>settings</span><span class=p>.</span><span class=n>epsilon</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>gameObject</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>Rotate</span><span class=p>(</span><span class=n>Vector3</span><span class=p>.</span><span class=n>up</span><span class=p>*(</span><span class=n>rotationSpeed</span><span class=p>*</span><span class=n>Time</span><span class=p>.</span><span class=n>deltaTime</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>AudioListener</span><span class=p>.</span><span class=n>GetSpectrumData</span><span class=p>(</span><span class=n>spectrumBuff</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=n>FFTWindow</span><span class=p>.</span><span class=n>BlackmanHarris</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>currentSpectrums</span><span class=p>.</span><span class=n>CopyFrom</span><span class=p>(</span><span class=n>spectrumBuff</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>spectrumJob</span> <span class=p>=</span> <span class=k>new</span> <span class=n>SpectrumJob</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>maxScale</span> <span class=p>=</span> <span class=n>inMaxScale</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>dynamics</span> <span class=p>=</span> <span class=n>inDynamics</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>epsilon</span> <span class=p>=</span> <span class=n>inEpsilon</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>currentSpectrums</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>currentSpectrums</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>prevSpectrums</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>prevSpectrums</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>origins</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>origins</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>jobHandle</span> <span class=p>=</span> <span class=n>spectrumJob</span><span class=p>.</span><span class=n>Schedule</span><span class=p>(</span><span class=n>transformsAccess</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>LateUpdate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>jobHandle</span><span class=p>.</span><span class=n>Complete</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>spectrumJob</span><span class=p>.</span><span class=n>prevSpectrums</span><span class=p>.</span><span class=n>CopyTo</span><span class=p>(</span><span class=n>prevSpectrums</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>OnDestroy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>currentSpectrums</span><span class=p>.</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>prevSpectrums</span><span class=p>.</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>origins</span><span class=p>.</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>transformsAccess</span><span class=p>.</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now on <code>Update()</code>, we create the <code>SpectrumJob</code>, fill all the data needed for the Job to perform, then schedule it. The new <code>TransformAccessArray</code> on the <code>Start()</code> method is needed for the <code>SpectrumJob</code> to work. Since previously when we create the cube, it’s transform is not laid out linearly on the memory, we need to create a new <code>TransformAccess</code> data with the array of transforms for the <code>SpectrumJob</code> so it could be worked on. On <code>LateUpdate</code>, we ask the <code>jobHandle</code> to Complete the job, then we copy the data from <code>SpectrumJob</code> into our <code>prevSpectrums</code> buffers, this buffer will be feeded into the Job again in the next update.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/_1D12g4bwmA style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>In this video you could see the results with two audio channels, left and right, I omitted the necessary code above for the two channels, but it is basically the same idea but you need to get the spectrum data from the left (0) and the right (1) channel.</p><p>Previously on the old MonoBehavior workflow we cannot have this many cube to be displayed smoothly, but changing our code to work with the new JobSystem, our Audio Visualizer now could handle two channels simultaneously!.</p><p>With this the job system is done, we’ll move on the next part, we’ll talk about how to move this into our end goal Unity ECS form.</p><p>Until next time!</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/ernesernesto target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://twitter.com/ernesernesto target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2026 .
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel=noopener>Hugo blog awesome</a>.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=http://ernesernesto.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>